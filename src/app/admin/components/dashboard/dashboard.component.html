<div class="container">
  <h2>Dashboard</h2>
  <div class="row">
    <!-- Card layout for each item -->
    <div class="col-md-4 mb-4" *ngFor="let item of ideas">
      <div class="card shadow-sm">
        <div class="card-body">
          <!-- Title -->
          <h5 class="card-title">{{ item.judul }}</h5>

          <!-- Description -->
          <p class="card-text text-muted">
            {{ item.deskripsi }}
          </p>

          <!-- Creator and Creation Date -->
          <p class="mb-2">
            <strong>Creator:</strong> {{ item.user.username || "Unknown" }}
            <br />
            <strong>Date:</strong> {{ item.createdAt | date : "yyyy-MM-dd" }}
          </p>

          <!-- Image Preview -->
          <div *ngIf="item.fileImage">
            <img
              [src]="getIdeaImageUrl(item.id)"
              alt="Idea Image"
              class="img-fluid"
            />
          </div>

          <!-- File Preview -->
          <div *ngIf="item.filePath">
            <button
              class="btn btn-primary btn-sm"
              (click)="viewFile(item.id, item.filePath)"
            >
              Preview File
            </button>

            <!-- Display the preview of the file -->
            <div *ngIf="previewUrl && item.id === selectedItemId">
              <ngx-doc-viewer
                [url]="previewUrl"
                viewer="google"
                style="width: 100%; height: 400px; border: none"
              ></ngx-doc-viewer>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination Controls -->
    <div class="d-flex justify-content-center align-items-center mt-4">
      <button
        class="btn btn-outline-primary me-2"
        (click)="onPageChange(pageNumber - 1)"
        [disabled]="pageNumber === 0"
      >
        Previous
      </button>
      <span>Page {{ pageNumber + 1 }} of {{ totalPages }}</span>
      <button
        class="btn btn-outline-primary ms-2"
        (click)="onPageChange(pageNumber + 1)"
        [disabled]="pageNumber + 1 === totalPages"
      >
        Next
      </button>
    </div>
  </div>
</div>
