<div class="add-user-container">
  <h2 class="form-title">Add New User</h2>
  <form [formGroup]="addUserForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="username">Username</label>
      <input
        id="username"
        formControlName="username"
        type="text"
        class="form-control"
        placeholder="Enter username"
      />
      <div
        *ngIf="
          addUserForm.get('username')?.invalid &&
          addUserForm.get('username')?.touched
        "
        class="error"
      >
        Username is required.
      </div>
    </div>

    <div class="form-group">
      <label for="nip">NIP</label>
      <input
        id="nip"
        formControlName="nip"
        type="text"
        class="form-control"
        placeholder="Enter NIP"
      />
      <div
        *ngIf="
          addUserForm.get('nip')?.invalid && addUserForm.get('nip')?.touched
        "
        class="error"
      >
        NIP is required and should only contain numbers.
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        id="email"
        formControlName="email"
        type="email"
        class="form-control"
        placeholder="Enter email"
      />
      <div
        *ngIf="
          addUserForm.get('email')?.invalid && addUserForm.get('email')?.touched
        "
        class="error"
      >
        Valid email is required.
      </div>
    </div>

    <div class="form-group">
      <label for="password">Password</label>
      <input
        id="password"
        formControlName="password"
        type="password"
        class="form-control"
        placeholder="Enter password"
      />
      <div
        *ngIf="
          addUserForm.get('password')?.invalid &&
          addUserForm.get('password')?.touched
        "
        class="error"
      >
        Password is required and should be at least 6 characters.
      </div>
    </div>

    <div class="form-group">
      <label for="noHp">No HP</label>
      <input
        id="noHp"
        formControlName="noHp"
        type="text"
        class="form-control"
        placeholder="Enter No HP"
      />
      <div
        *ngIf="
          addUserForm.get('noHp')?.invalid && addUserForm.get('noHp')?.touched
        "
        class="error"
      >
        No HP is required and should be a valid phone number.
      </div>
    </div>

    <div class="form-group">
      <label for="unitKerja">Unit Kerja</label>
      <input
        id="unitKerja"
        formControlName="unitKerja"
        type="text"
        class="form-control"
        placeholder="Enter or select Unit Kerja"
        (input)="onUnitKerjaInput($event)"
      />
      <!-- Display the unit list only when there's input -->
      <ul
        *ngIf="filteredUnits.length > 0 && addUserForm.get('unitKerja')?.value"
        class="autocomplete-list"
      >
        <li *ngFor="let unit of filteredUnits" (click)="selectUnit(unit)">
          {{ unit.unitName }}
        </li>
      </ul>
      <div
        *ngIf="
          addUserForm.get('unitKerja')?.invalid &&
          addUserForm.get('unitKerja')?.touched
        "
        class="error"
      >
        Unit Kerja is required.
      </div>
    </div>

    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="addUserForm.invalid"
    >
      Submit
    </button>
  </form>
</div>
